# Storage Module

## Description

This module takes the resposibility to the fundamental persist storage task of this app.

## Use Guide

To use this storage module in the app, you need to both operate in `main` and `renderer` process

**-Main Process**

**--Create**

Create a new instance in `main` process like below

```ts
let storage: EleCFStorage = new EleCFStorage()
```

Check comment of `EleCFStorage` for more info.

The default storage path is `userData` path, which may changed based on the platform and will dynamically generated by `app.getPath()`. You can specified the name of the json file which used to store the info of this storage instance when initializing.

**--Expose**

Above settings will works well if you only use it in `main` process, however in general we want use it in `renderer` process. By default, instance will call `addIpcMainHandler()` which enable `renderer` process to operate this storage by `ipcRender.invoke()`

**-Renderer**

**--SendEvent**

In `renderer` process, call the event to operate with specified instance like below

```ts
let res = await window.electron.ipcRenderer.invoke('storage:eleConfig:getInfo');
```

The channel name may based on your storage name or you custom settings when calling `addIpcMainHandler()` method

## Known Issue

**-Storage**

- Storage info can NOT exist any `undefined`, since JSON.parse() is not support parsing `undefined` value